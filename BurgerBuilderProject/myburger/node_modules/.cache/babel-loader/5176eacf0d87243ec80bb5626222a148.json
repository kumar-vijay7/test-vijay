{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\ReactProjects\\\\myburger\\\\src\\\\hoc\\\\WithErrorHandler\\\\withErrorHandler.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport Modal from '../../components/UI/Modal/Modal';\nimport Aux from '../Auxx/Auxx';\n\nvar withErrorHandler = function withErrorHandler(WrappedComponent, axios) {\n  return function (props) {\n    var _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        error = _useState2[0],\n        setError = _useState2[1];\n\n    var reqInterceptor = axios.interceptors.request.use(function (req) {\n      setError(null);\n      return req;\n    });\n    var resInterceptor = axios.interceptors.response.use(function (res) {\n      return res;\n    }, function (err) {\n      setError(err);\n    });\n    useEffect(function () {\n      return function () {\n        axios.interceptors.request.eject(_this.reqInterceptor);\n        axios.interceptors.response.eject(_this.resInterceptor);\n      };\n    });\n\n    errorConfirmedHandler = function errorConfirmedHandler() {\n      _this.setState({\n        error: null\n      });\n    };\n\n    return /*#__PURE__*/React.createElement(Aux, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      show: _this.state.error,\n      modalClosed: _this.errorConfirmedHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 17\n      }\n    }, _this.state.error ? _this.state.error.message : null), /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({}, _this.props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    })));\n  };\n};\n\nexport default withErrorHandler;","map":{"version":3,"sources":["E:/ReactProjects/myburger/src/hoc/WithErrorHandler/withErrorHandler.js"],"names":["React","useState","useEffect","Modal","Aux","withErrorHandler","WrappedComponent","axios","props","error","setError","reqInterceptor","interceptors","request","use","req","resInterceptor","response","res","err","eject","errorConfirmedHandler","setState","state","message"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAAyBC,SAAzB,QAA0C,OAA1C;AACA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,OAAOC,GAAP,MAAgB,cAAhB;;AACA,IAAMC,gBAAgB,GAAC,SAAjBA,gBAAiB,CAACC,gBAAD,EAAkBC,KAAlB,EAA0B;AAC7C,SAAO,UAAAC,KAAK,EAAG;AAAA,oBACcP,QAAQ,CAAC,IAAD,CADtB;AAAA;AAAA,QACJQ,KADI;AAAA,QACEC,QADF;;AAIR,QAAMC,cAAc,GAAEJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,GAAG,EAAE;AACrDL,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,aAAOK,GAAP;AACP,KAHwB,CAAtB;AAIH,QAAMC,cAAc,GAACT,KAAK,CAACK,YAAN,CAAmBK,QAAnB,CAA4BH,GAA5B,CAAgC,UAAAI,GAAG;AAAA,aAAEA,GAAF;AAAA,KAAnC,EAAyC,UAAAC,GAAG,EAAE;AACvDT,MAAAA,QAAQ,CAACS,GAAD,CAAR;AACP,KAFgB,CAArB;AAIAjB,IAAAA,SAAS,CAAC,YAAI;AACV,aAAO,YAAI;AACPK,QAAAA,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BO,KAA3B,CAAiC,KAAI,CAACT,cAAtC;AACAJ,QAAAA,KAAK,CAACK,YAAN,CAAmBK,QAAnB,CAA4BG,KAA5B,CAAkC,KAAI,CAACJ,cAAvC;AACH,OAHD;AAIH,KALQ,CAAT;;AAOAK,IAAAA,qBAAqB,GAAC,iCAAI;AACtB,MAAA,KAAI,CAACC,QAAL,CAAc;AAACb,QAAAA,KAAK,EAAC;AAAP,OAAd;AACH,KAFD;;AAII,wBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,KAAD;AACC,MAAA,IAAI,EAAE,KAAI,CAACc,KAAL,CAAWd,KADlB;AAEC,MAAA,WAAW,EAAE,KAAI,CAACY,qBAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGK,KAAI,CAACE,KAAL,CAAWd,KAAX,GAAiB,KAAI,CAACc,KAAL,CAAWd,KAAX,CAAiBe,OAAlC,GAA4C,IAHjD,CADA,eAMA,oBAAC,gBAAD,oBAAsB,KAAI,CAAChB,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OANA,CADJ;AAUP,GAjCD;AAkCH,CAnCD;;AAqCA,eAAeH,gBAAf","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport Modal from '../../components/UI/Modal/Modal';\r\nimport Aux from '../Auxx/Auxx';\r\nconst withErrorHandler=(WrappedComponent,axios)=>{\r\n    return props =>{\r\n        const [error,setError] = useState(null);\r\n       \r\n\r\n           const reqInterceptor= axios.interceptors.request.use(req=>{\r\n                setError(null);\r\n                return req;\r\n        });\r\n        const resInterceptor=axios.interceptors.response.use(res=>res,err=>{\r\n                    setError(err);\r\n            });\r\n        \r\n        useEffect(()=>{\r\n            return ()=>{\r\n                axios.interceptors.request.eject(this.reqInterceptor);\r\n                axios.interceptors.response.eject(this.resInterceptor);\r\n            };\r\n        });\r\n                       \r\n        errorConfirmedHandler=()=>{\r\n            this.setState({error:null})\r\n        }\r\n       \r\n            return(\r\n                <Aux>\r\n                <Modal\r\n                 show={this.state.error}\r\n                 modalClosed={this.errorConfirmedHandler}>\r\n                    {this.state.error?this.state.error.message : null}\r\n                </Modal>\r\n                <WrappedComponent {...this.props}/>\r\n            </Aux>\r\n            );\r\n    } \r\n}\r\n\r\nexport default withErrorHandler;"]},"metadata":{},"sourceType":"module"}